<div class="page" ng-controller="transactions as vm">

<div class="row">
    <div class="col-md-12">
        <h2 class="page-title" translate>EXPENSES_HISTORY</h2>
    </div>
</div>
<div class="row">
<div class="col-md-12">
<div class="widgetWrapper">
<div ng-show="showSpinner" class="widgetOverlay">
</div>
<section class="widget transactions-widget">
<header class="hidden-md hidden-lg">
    <h4>
        <span class="tableAction">
            <i class="fa fa-plus"></i>
            <a href="javascript:void(0)"
               id="createButton"
               translate
               ng-click="vm.addMobile()">
                NEW_TRANSACTION
            </a>
        </span>
        <span class="tableAction">
            <i class="fa fa-filter"></i>
            <a href="javascript:void(0)"
               id="filterButton"
               translate
               ng-click="vm.filterMobile()">
                FILTER
            </a>
        </span>
    </h4>

    <div>
        <div ng-show="vm.tags.length">
            <span translate>TAGS</span>: <span ng-bind-html="vm.getTags()"></span>
        </div>
        <div ng-show="vm.showPeriod()">
            <span translate>PERIOD</span>: <span>{{vm.minDate}}</span> - <span>{{vm.maxDate}}</span>
        </div>
    </div>
</header>
<header class="hidden-phone-landscape">
    <div class="row shortStats">
        <div class="col-md-3">
            <span class="fs15"><span translate>TOTAL_SUM</span>:</span>
            <span> {{vm.total}} </span>
            <span translate>CURRENCY</span>
        </div>
        <div style="float: right" class="col-md-3 download-excel">
                             <span class="tableAction hidden-phone-landscape">
                                  <a href="javascript:void(0)"
                                     class="simptip-position-top simptip-movable simptip-smooth"
                                     data-tooltip="{{'DOWNLOAD_EXCEL_FILE'|translate}}"
                                     ng-click="vm.downloadExcel()"
                                     title="{{'DOWNLOAD'|translate}}">
                                      <img src="../img/excel-3-32.png" alt=""/>
                                  </a>
                            </span>
                            <span class="tableActions">
                                <a href="javascript:void(0)"
                                   class="simptip-position-top simptip-movable simptip-smooth"
                                   data-tooltip="{{'FILTER'|translate}}"
                                   ng-click="vm.filtering = !vm.filtering">
                                    <i class="fa fa-search fa-2x"></i>
                                </a>
                            </span>
                            <span class="tableActions">
                                <a href="javascript:void(0)"
                                   class="simptip-position-top simptip-movable simptip-smooth"
                                   data-tooltip="{{'NEW_TRANSACTION'|translate}}"
                                   ng-click="vm.addNewTxn()">
                                    <i class="fa fa-plus fa-2x"></i>
                                </a>
                            </span>

        </div>
    </div>
    <div class="row" style="margin-top: 10px;" ng-show="vm.filtering">
        <div class="col-md-6">
            <div>
                <!--<label translate>BY_TAGS</label><br/>-->
                <tags-input ng-model="vm.tags"
                            min-Length="1"
                            add-from-autocomplete-only="false"
                            replace-spaces-with-dashes="false"
                            placeholder="{{'SEARCH_BY_TAGS'|translate}}"
                            on-tag-added="vm.tagFilterChange()"
                            on-tag-removed="vm.tagFilterChange()"
                            class="bootstrap inline-tags-input">
                    <auto-complete source="vm.loadTags()"
                                   min-length="0"
                                   debounce-delay="0"
                                   max-results-to-show="50">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
        <div class="col-md-4">
            <div class="searchByDate">
                <!--<label translate>BY_DATE</label><br/>-->
                <div style="padding: 6px 0">
                    <datepicker type="daterange"
                                locale="vm.datePickerRu"
                                format="DD.MM.YYYY"
                                opens="left"
                                ranges="vm.dateRanges"
                                ng-model="vm.filterDateRange">
                        <i class="fa fa-calendar fa-lg"></i>
                        <span translate>Поиск по дате</span>
                        <b class="caret"></b>
                    </datepicker>
                </div>
            </div>
        </div>
    </div>
</header>
<div>
<div class="row">
<div class="col-md-12">
<div class="body">
<table id="transactions-table"
       class="table table-striped dataTable">
<thead>
<tr>
    <th ng-class="vm.getSortingForColumn('timestamp')"
        ng-click="vm.changeSorting('timestamp')"
        id="timestamp"
        class="date-th" translate>
        DATE
    </th>
    <th class="hidden-phone-landscape no-sort" translate>
        TIME
    </th>
    <th ng-class="vm.getSortingForColumn('amountInBaseCurrency')"
        ng-click="vm.changeSorting('amountInBaseCurrency')"
        id="amount">
        <span translate>AMOUNT</span>
    </th>
    <th class="no-sort map" translate>ADDRESS</th>
    <th ng-class="vm.getSortingForColumn('foto')"
        ng-click="vm.changeSorting('foto')"
        id="foto"
        translate>
        FOTO
    </th>
    <th class="no-sort hidden-sm tags-th" translate>TAGS</th>
</tr>
</thead>
<tbody ng-click="vm.tableClicked($event)">
<!--<tr ng-repeat="newTxn in vm.newTransactions" class="newTransactionRow">-->
<!--<td>-->
<!--<span class="dashed-bottom focus-next"-->
<!--ng-click="vm.editNewTxnDate=true"-->
<!--ng-hide="vm.editNewTxnDate">-->
<!--{{newTxn.timestamp | date:'dd MMMM yyyy'}}-->
<!--</span>-->
<!--<input type="text" us-date-time-picker focus-me="vm.editNewTxnDate"-->
<!--ng-show="vm.editNewTxnDate" class="inlineInput"-->
<!--ng-model="vm.curDate"/>-->
<!--</td>-->
<!--<td>-->
<!--<div>-->
<!--<span class="dashed-bottom focus-next"-->
<!--ng-click="vm.editNewTxnTime=true"-->
<!--ng-hide="vm.editNewTxnTime">-->
<!--{{newTxn.timestamp | date:'HH:mm'}}-->
<!--</span>-->
<!--<input style="width:40px" type="text" ng-show="vm.editNewTxnTime"-->
<!--ng-model="vm.curTime" focus-me="vm.editNewTxnTime" ui-mask="99:99"-->
<!--class="inlineInput"/>-->
<!--</div>-->
<!--</td>-->
<!--<td>-->
<!--<div>-->
<!--<input type="text" focus-me="vm.isAdding" ng-model="newTxn.amountInBaseCurrency"-->
<!--style="width: 50px"-->
<!--class="styledInput transparentInput"/>-->
<!--<span translate>{{'CURRENCY'}}</span>-->
<!--</div>-->
<!--</td>-->
<!--<td>-->
<!--<div class="dashed-bottom" style="width: 21px;margin: 0 auto;">-->
<!--<a href="javascript:void(0)" ng-click="vm.pickAddress()">-->
<!--<i class="fa fa-question fa-2x"></i>-->
<!--</a>-->
<!--</div>-->
<!--</td>-->
<!--<td>-->

<!--</td>-->
<!--<td>-->
<!--<tags-input-->
<!--ng-model="newTxn.tags"-->
<!--min-Length="1"-->
<!--replace-spaces-with-dashes="false"-->
<!--placeholder="{{'ADD_TAG'|translate}}"-->
<!--class="bootstrap inline-tags-input">-->
<!--<auto-complete source="vm.loadTags()" min-length="0"-->
<!--debounce-delay="0"-->
<!--max-results="5">-->
<!--</auto-complete>-->
<!--</tags-input>-->
<!--</td>-->

<!--<td class="rowActions-td hidden-phone-landscape">-->
<!--<ul class="rowActions">-->
<!--<li>-->
<!--<a href="javascript:void(0)" ng-click="vm.addTnx()">-->
<!--<i class="fa fa-check fa-2x"></i>-->
<!--</a>-->
<!--</li>-->
<!--<li>-->
<!--<a href="javascript:void(0)" ng-click="vm.removeNewTxn($index)">-->
<!--<i class="fa fa-times fa-2x"></i>-->
<!--</a>-->
<!--</li>-->
<!--</ul>-->
<!--</td>-->
<!--</tr>-->
<tr ng-repeat-start="transaction in vm.trs"
    ng-class="{selected:vm.selectedTnx.id === transaction.id}"
    ng-if="(!vm.editing || vm.selectedTnx.id !== transaction.id) && !transaction.new"
    data-index="{{$index}}">
    <td class="date-td">
        <div>
                              <span class="hidden-phone-landscape fullDate">
                                   {{transaction.timestamp | date:'dd MMMM yyyy'}}
                              </span>
                              <span class="visible-phone-landscape shortDate">
                                   {{transaction.timestamp | date:'dd.MM.yy'}}
                              </span>
        </div>
    </td>
    <td class="hidden-phone-landscape time-td">
        <div>
            {{transaction.timestamp | date:'HH:mm'}}
        </div>
    </td>
    <td class="transactionAmount">
        <div>
            {{transaction.amountInBaseCurrency}} р.
        </div>
    </td>
    <td class="map">
        <div ng-if="transaction.latitude && transaction.longitude">
            <a title="{{'SHOW_ON_MAP'|translate}}"
               href="javascript:void(0)">
                <i class="fa fa-map-marker fa-2x"></i>
            </a>
        </div>
    </td>
    <td class="foto-td">
        <a href="javascript:void(0)"
           ng-if="transaction.imgUrl">
            <i class="fa fa-picture-o fa-2x"></i>
        </a>
    </td>
    <td class="hidden-sm bootstrap tags-td">
        <div>
            <ul class="transaction-tags">
                <li ng-repeat="tag in transaction.tags"
                    ng-mouseenter="vm.hoveredTag = tag"
                    ng-mouseleave="vm.hoveredTag = null"
                    ng-class="{'tag-hovered':vm.hoveredTag.text === tag.text}">
                    <div style="display:inline-block">
                                                            <span ng-style="{'border-color':vm.getTagColorStyle(tag.color)}"
                                                                  class="beforeTag">
                                                                  </span><a class="transaction-tag"
                                                                            ng-style="{'background':tag.color}"
                                                                            href="javascript:void(0)">
                        {{tag.text}}
                    </a>
                    </div>
                </li>
            </ul>
        </div>
    </td>
    <td class="rowActions-td hidden-phone-landscape">
        <ul ng-class="{visible:vm.selectedTnx.id === transaction.id}"
            class="rowActions">
            <li>
                <a id="pencil"
                   href="javascript:void(0)">
                    <i class="fa fa-gear edit-transaction"></i>
                </a>
            </li>
        </ul>
    </td>
</tr>
<tr ng-repeat-end class="edited"
    data-index="{{$index}}"
    ng-if="(vm.selectedTnx.id === transaction.id && vm.editing) || transaction.new">
    <td class="date-td">
        <div>
            <input type="text" us-date-time-picker class="inlineInput transparentInput" ng-model="transaction.date"/>
        </div>
    </td>
    <td class="hidden-phone-landscape time-td">
        <div>
            <input style="width:40px" type="text" ng-model="transaction.time" ui-mask="99:99"
                   class="inlineInput transparentInput"/>
        </div>
    </td>
    <td class="transactionAmount">
        <div>
            <input type="text" ng-model="transaction.amountInBaseCurrency"
                   style="width: 50px"
                   class="styledInput transparentInput amount inlineInput"/>
            <span translate>{{'CURRENCY'}}</span>
        </div>
    </td>
    <td class="map">
        <div class="dashed-bottom"
             style="margin: 0 auto;">
            <a href="javascript:void(0)" ng-click="vm.pickAddress()">
                <i class="fa fa-question fa-2x"></i>
            </a>
        </div>
    </td>
    <td class="foto-td">
        <a href="javascript:void(0)"
           ng-if="transaction.imgUrl">
            <i class="fa fa-picture-o fa-2x"></i>
        </a>
    </td>
    <td class="hidden-sm bootstrap tags-td">
        <div>
            <tags-input
                    ng-model="transaction.tags"
                    min-Length="1"
                    replace-spaces-with-dashes="false"
                    placeholder="{{'ADD_TAG'|translate}}"
                    class="bootstrap inline-tags-input">
                <auto-complete source="vm.loadTags()" min-length="0"
                               debounce-delay="0"
                               max-results="5">
                </auto-complete>
            </tags-input>
        </div>
    </td>
    <td class="rowActions-td hidden-phone-landscape">
        <ul class="rowActions">
            <li>
                <a href="javascript:void(0)">
                    <i class="fa fa-check"></i>
                </a>
            </li>
            <li>
                <a href="javascript:void(0)">
                    <i class="fa fa-trash-o"></i>
                </a>
            </li>
        </ul>
    </td>
</tr>
</tbody>
</table>
<div ng-show="vm.isLoading && !vm.richedTheEnd"
     class="loaderBox hidden-phone-landscape">
    <div class="loader">
        <div class='bar'></div>
        <div class='bar'></div>
        <div class='bar'></div>
        <div class='bar'></div>
        <div class='bar'></div>
    </div>
    <div ng-show="vm.richedTheEnd" class="loader theEnd">
    </div>
</div>
<div class="hidden-lg hidden-md loadMore">
    <div ng-click="vm.loadMoreTransactions(true,'both')">
        <span ng-hide="vm.isLoading || vm.richedTheEnd" translate>MORE</span>
        <span ng-show="vm.isLoading"><span translate>LOADING</span>...</span>
    </div>
</div>
<div ng-hide="vm.richedTheEnd"
     class="hidden-phone-landscape"
     in-view-offset="-500"
     in-view="vm.loadMoreTransactions($inview,$inviewpart)">
</div>
</div>
</div>
</div>
</div>
<div class="clearfix"></div>
</section>
</div>
</div>
</div>
<div ng-show="vm.selectedTnx || vm.isAdding || vm.isFiltering" class="transaction-menu"
     ng-class="{fullHeight : vm.isEditing || vm.isAdding || vm.isFiltering}">
<div class="actions" ng-hide="vm.isAdding || vm.isFiltering">
    <a class="menu-action" href="javascript:void(0)" ng-click="vm.toggleEditing(vm.selectedTnx)">
        <i class="fa fa-pencil"></i>
        <span translate>EDIT</span>
    </a>
    <a class="menu-action" href="javascript:void(0)" ng-click="vm.remove(vm.selectedTnx)">
        <i class="fa fa-trash-o"></i>
        <span translate>DELETE</span>
    </a>
    <a class="menu-action" href="javascript:void(0)" ng-click="vm.closeMobileInfo()">
        <i class="fa fa-times"></i>
        <span translate>CLOSE</span>
    </a>
</div>
<div class="menu-tags" ng-hide="vm.isEditing || vm.isAdding || vm.isFiltering">
    <ul class="transaction-tags">
        <li ng-repeat="tag in vm.selectedTnx.tags">
            <div style="display:inline-block">
                                    <span ng-style="{'border-color':vm.getTagColorStyle(tag.color)}"
                                          class="beforeTag"></span><a ng-style="{'background':tag.color}"
                                                                      ng-click="vm.addTag(tag.text)"
                                                                      href="javascript:void(0)">{{tag.text}}</a>
            </div>
        </li>
    </ul>
</div>
<div ng-if="vm.isEditing" class="mobileform">
    <div class="row">
        <div class="col-md-12">
            <div>
                <label for="dateAndTimeEditor" translate>DATE_AND_TIME</label>
                <br/>
                <input type="text"
                       us-date-time-picker
                       editor="editor"
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.selectedTnxDate">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div>
                <label for="editedAmount" translate>AMOUNT</label>
                <br/>
                <input type="text" value=""
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.editedTnx.amountInBaseCurrency">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div style="width:100%" class="inputHost">
                <label translate>TAGS</label>
                <br/>
                <tags-input
                        ng-model="vm.editedTnx.tags"
                        min-Length="1"
                        replace-spaces-with-dashes="false"
                        style="width: 250px"
                        placeholder="{{'ADD_TAG'|translate}}"
                        class="bootstrap">
                    <auto-complete source="vm.loadTags()" min-length="0"
                                   debounce-delay="0"
                                   max-results="5">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost" style="width: 100%">
                <label translate>PLACE</label>
                <br/>
                <button style="display:inline-block"
                        type="button"
                        ng-click="vm.pickAddress()"
                        class="btn btn-success">
                    <i style="font-size:15px;"
                       class="fa fa-map-marker fa-1x"></i> <span
                        translate>SHOW_ON_MAP</span>
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost">
                <button type="button"
                        class="btn btn-primary"
                        ng-click="vm.saveTnx();vm.closeMobileInfo();"
                        data-placement="right">
                    <span translate>SAVE</span>
                </button>
                <button type="button"
                        class="btn btn-danger"
                        ng-click="vm.remove(vm.selectedTnx)"
                        data-placement="right">
                    <span translate>DELETE</span>
                </button>
            </div>
        </div>
    </div>
</div>
<div ng-if="vm.isAdding" class="mobileform">
    <div class="row">
        <div class="col-md-12">
            <div>
                <label for="dateAndTimeEditor" translate>DATE_AND_TIME</label>
                <br/>
                <input type="text"
                       ui-mask="99.99.9999"
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.curDateTime">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div>
                <label for="editedAmount" translate>AMOUNT</label>
                <br/>
                <input type="text" value=""
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.newTnx.amountInBaseCurrency">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div style="width:100%" class="inputHost">
                <label translate>TAGS</label>
                <br/>
                <tags-input
                        ng-model="vm.newTnx.tags"
                        min-Length="1"
                        replace-spaces-with-dashes="false"
                        style="width: 250px"
                        placeholder="{{'ADD_TAG'|translate}}"
                        class="bootstrap">
                    <auto-complete source="vm.loadTags()" min-length="0"
                                   debounce-delay="0"
                                   max-results="5">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost" style="width: 100%">
                <label translate>PLACE</label>
                <br/>
                <button style="display:inline-block"
                        type="button"
                        ng-click="vm.pickAddress()"
                        class="btn btn-success">
                    <i style="font-size:15px;"
                       class="fa fa-map-marker fa-1x"></i> <span
                        translate>SHOW_ON_MAP</span>
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost">
                <button type="button"
                        class="btn btn-primary"
                        ng-click="vm.addTnx();vm.closeMobileInfo();"
                        data-placement="right">
                    <span translate>ADD_NEW</span>
                </button>
                <button type="button"
                        class="btn btn-default"
                        ng-click="vm.isAdding = false"
                        data-placement="right">
                    <span translate>CANCEL</span>
                </button>
            </div>
        </div>
    </div>
</div>
<div ng-if="vm.isFiltering" class="mobileform">
    <div class="row">
        <div class="col-md-12">
            <div>
                <label translate>BY_TAGS</label><br/>
                <tags-input ng-model="vm.tags"
                            min-Length="1"
                            add-from-autocomplete-only="false"
                            replace-spaces-with-dashes="false"
                            placeholder="{{'SEARCH_BY_TAGS'|translate}}"
                            class="bootstrap">
                    <auto-complete source="vm.loadTags()"
                                   min-length="0"
                                   debounce-delay="0"
                                   max-results-to-show="50">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="searchByDate">
                <label translate>BY_DATE</label><br/>

                <div style="padding: 6px 0">
                    <datepicker type="daterange"
                                locale="vm.datePickerRu"
                                format="DD.MM.YYYY"
                                opens="left"
                                ranges="vm.dateRanges"
                                ng-model="vm.filterMobileDateRange">
                        <i class="fa fa-calendar fa-lg"></i>
                        <span translate>SELECT_DATE</span>
                        <b class="caret"></b>
                    </datepicker>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
            <div class="controls">
                <label translate>
                    WITH_PHOTOS
                </label><br/>
                <input type="checkbox" class="js-switch" ng-model="vm.onlyWithPhotoMobile" ui-switch/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost">
                <button type="button" class="btn btn-primary"
                        ng-click="vm.clearFilters()"
                        data-placement="right" translate>
                    <span translate>CLEAR</span>
                </button>
                <button type="button" class="btn dark-grey"
                        ng-click="vm.applyFilters();vm.isFiltering = false;"
                        data-placement="right" translate>
                    <span translate>Применить</span>
                </button>
            </div>
        </div>
    </div>
</div>
</div>
<div class="sideForm widget hidden-phone-landscape" ng-class="{formInRight:vm.showSideForm}">
<form ng-show="vm.isEditing">
    <div class="row">
        <div class="col-md-6">
            <div>
                <label for="dateAndTimeEditor" translate>DATE_AND_TIME</label>
                <br/>
                <input type="text"
                       id="dateAndTimeEditor" us-date-time-picker
                       editor="editor"
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.selectedTnxDate">
            </div>
        </div>
        <div class="col-md-6">
            <div>
                <label for="editedAmount" translate>AMOUNT</label>
                <br/>
                <input type="text" value=""
                       style="width: 100%"
                       id="editedAmount"
                       class="styledInput"
                       ng-model="vm.editedTnx.amountInBaseCurrency">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div style="width:100%" class="inputHost">
                <label translate>TAGS</label>
                <br/>
                <tags-input
                        ng-model="vm.editedTnx.tags"
                        min-Length="1"
                        replace-spaces-with-dashes="false"
                        style="width: 250px"
                        placeholder="{{'ADD_TAG'|translate}}"
                        class="bootstrap">
                    <auto-complete source="vm.loadTags()" min-length="0"
                                   debounce-delay="0"
                                   max-results="5">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost" style="width: 100%">
                <label translate>PLACE</label>
                <br/>
                <button style="display:inline-block"
                        type="button"
                        id="editAddress"
                        ng-click="vm.pickAddress()"
                        class="btn btn-success">
                    <i style="font-size:15px;"
                       class="fa fa-map-marker fa-1x"></i> <span
                        translate>SHOW_ON_MAP</span>
                </button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost">
                <button type="button"
                        class="btn btn-primary"
                        ng-click="vm.saveTnx()"
                        id="saveEdit"
                        data-placement="right">
                    <span translate>SAVE</span>
                </button>
                <button type="button"
                        class="btn btn-danger"
                        ng-click="vm.remove(vm.selectedTnx)"
                        data-placement="right">
                    <span translate>DELETE</span>
                </button>
                <button type="button" class="btn dark-grey"
                        ng-click="vm.toggleEditing(vm.selectedTnx)"
                        data-placement="right" translate>
                    <span translate>CANCEL</span>
                </button>
            </div>
        </div>
    </div>
</form>
<form ng-show="vm.isAdding">
    <div class="row">
        <div class="col-md-6">
            <div>
                <label for="dateAndTimeEditor" translate>DATE_AND_TIME</label>
                <br/>
                <input type="text"
                       us-date-time-picker
                       editor="editor"
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.curDateTime">
            </div>
        </div>
        <div class="col-md-6">
            <div>
                <label for="editedAmount" translate>AMOUNT</label>
                <br/>
                <input type="text" value=""
                       style="width: 100%"
                       class="styledInput"
                       ng-model="vm.newTnx.amountInBaseCurrency">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div style="width:100%" class="inputHost">
                <label translate>TAGS</label>
                <br/>
                <tags-input
                        ng-model="vm.newTnx.tags"
                        min-Length="1"
                        replace-spaces-with-dashes="false"
                        style="width: 250px"
                        placeholder="{{'ADD_TAG'|translate}}"
                        class="bootstrap">
                    <auto-complete source="vm.loadTags()" min-length="0"
                                   debounce-delay="0"
                                   max-results="5">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <div class="inputHost" style="width: 100%">
                <label translate>PLACE</label>
                <br/>
                <button style="display:inline-block"
                        type="button"
                        ng-click="vm.pickAddress()"
                        class="btn btn-success">
                    <i style="font-size:15px;"
                       class="fa fa-map-marker fa-1x"></i> <span
                        translate>SHOW_ON_MAP</span>
                </button>
            </div>
        </div>
        <div class="col-md-6">
            <div class="inputHost">
                <label translate>&nbsp;</label>
                <br/>
                <button type="button"
                        class="btn btn-primary"
                        ng-click="vm.addTnx()"
                        data-placement="right">
                    <span translate>ADD_NEW</span>
                </button>
                <button type="button" class="btn dark-grey"
                        ng-click="toggleAdding()"
                        data-placement="right" translate>
                    <span translate>CANCEL</span>
                </button>
            </div>
        </div>
    </div>
</form>
<form ng-show="vm.isFiltering">
    <div class="row">
        <div class="col-md-12">
            <div>
                <label translate>BY_TAGS</label><br/>
                <tags-input ng-model="vm.tags"
                            min-Length="1"
                            add-from-autocomplete-only="false"
                            replace-spaces-with-dashes="false"
                            placeholder="{{'SEARCH_BY_TAGS'|translate}}"
                            on-tag-added="vm.tagFilterChange()"
                            on-tag-removed="vm.tagFilterChange()"
                            class="bootstrap">
                    <auto-complete source="vm.loadTags()"
                                   min-length="0"
                                   debounce-delay="0"
                                   max-results-to-show="50">
                    </auto-complete>
                </tags-input>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="searchByDate">
                <label translate>BY_DATE</label><br/>

                <div style="padding: 6px 0">
                    <datepicker type="daterange"
                                locale="vm.datePickerRu"
                                format="DD.MM.YYYY"
                                opens="left"
                                ranges="vm.dateRanges"
                                ng-model="vm.filterDateRange">
                        <i class="fa fa-calendar fa-lg"></i>
                        <span translate>SELECT_DATE</span>
                        <b class="caret"></b>
                    </datepicker>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5">
            <div class="controls">
                <label translate>
                    WITH_PHOTOS
                </label><br/>
                <input type="checkbox" class="js-switch" ng-model="vm.withPhotoVal" ui-switch/>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="inputHost" style="float: right">
                <button type="button" class="btn btn-primary"
                        ng-click="vm.clearFilters()"
                        data-placement="right" translate>
                    <span translate>CLEAR</span>
                </button>
                <button type="button" class="btn dark-grey"
                        ng-click="toggleFiltering()"
                        data-placement="right" translate>
                    <span translate>CANCEL</span>
                </button>
            </div>
        </div>
    </div>
</form>
</div>
</div>

